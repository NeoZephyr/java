DNS做负载
通过给客户端解析不同的IP地址，让客户端的流量直接到达各个服务器
延时性问题：在做出调度策略改变以后，由于DNS各级节点的缓存并不会及时的在客户端生效，而且DNS负载的调度策略比较简单，无法满足业务需求

在DNS服务器中配置多个A记录，如：
www.mysite.comINA114.100.80.1
www.mysite.comINA114.100.80.2
www.mysite.comINA114.100.80.3.
每次域名解析请求都会根据负载均衡算法计算一个不同的IP地址返回，这样A记录中配置的多个服务器就构成一个集群，并可以实现负载均衡。
DNS域名解析负载均衡的优点是将负载均衡工作交给DNS，省略掉了网络管理的麻烦，缺点就是DNS可能缓存A记录，不受网站控制。事实上，大型网站总是部分使用DNS域名解析，作为第一级负载均衡手段，然后再在内部做第二级负载均衡


四层负载均衡
工作在OSI模型的传输层，主要工作是转发，它在接收到客户端的流量以后通过修改数据包的地址信息将流量转发到应用服务器

TCP的连接建立，即三次握手是客户端和服务器直接建立的，负载均衡设备只是起到一个类似路由器的转发动作

七层负载均衡
工作在OSI模型的应用层，因为它需要解析应用层流量，所以七层负载均衡在接到客户端的流量以后，还需要一个完整的TCP/IP协议栈。七层负载均衡会与客户端建立一条完整的连接并将应用层的请求流量解析出来，再按照调度算法选择一个应用服务器，并与应用服务器建立另外一条连接将请求发送过去，因此七层负载均衡的主要工作就是代理

负载均衡和前端的客户端建立连接(三次握手)后，才可能接受到客户端发送的真正应用层内容的报文，然后再根据该报文中的特定字段，再加上负载均衡设备设置的服务器选择方式，决定最终选择的内部服务器

智能化：访问一个网站的用户流量，可以通过七层的方式，将对图片类的请求转发到特定的图片服务器并可以使用缓存技术；将对文字类的请求可以转发到特定的文字服务器并可以使用压缩技术

SYNFlood攻击
四层模式下这些SYN攻击都会被转发到后端的服务器上；而七层模式下这些SYN攻击自然在负载均衡设备上就截止，不会影响后台服务器的正常运营

在七层层面设定多种策略，过滤特定报文，例如SQLInjection等应用层面的特定攻击手段

负载均衡的算法
随机算法
轮询：当服务器群中各服务器的处理能力相同时，且每笔业务处理量差异不大时，最适合使用这种算法
加权轮询
最少连接
加权最少连接
普通哈希
IP地址散列
URL散列


dns来实施负载均衡
优点：
利用第三方dns实施，服务端架构不用动
少了一层网络请求

不足:
dns只具备解析功能，不能保证对应外网ip的可用性
当web-server需要扩容时，通过dns扩容生效时间长





反向代理的优势：
隐藏真实后端服务
负载均衡集群
高可用集群
缓存静态内容实现动静分离
安全限流
静态文件压缩
解决多个服务跨域问题
合并静态请求(HTTP/2.0后已经被弱化)
防火墙
SSL以及http2



四层负载均衡，也就是主要通过报文中的目标地址和端口，再加上负载均衡设备设置的服务器选择方式，决定最终选择的内部服务器

七层负载均衡，也称为“内容交换”，也就是主要通过报文中的真正有意义的应用层内容，
再加上负载均衡设备设置的服务器选择方式，决定最终选择的内部服务器

七层负载均衡服务器先代理最终的服务器和客户端建立连接（TCP 三次握手）后，才可能接收到客户端发送的真正应用层内容的报文， 然后再根据该报文中的特定字段，再加上负载均衡设备设置的服务器选择方式，决定最终选择的内部服务器
在这种情况下，负载均衡设备和前端的客户端以及后端的服务器会分别建立 TCP 连接


七层应用负载均衡使得整个网络更智能化，负载均衡器可以将图片类的请求转发到特定的图片服务器并可以使用缓存技术，将文字类的请求转发到特定的文字服务器并可以使用压缩技术，实现客户请求的 Header 重写 或对关键字进行过滤，还可以避免常见的 SYN Flood 攻击直接攻击到后台服务器

七层应用负载均衡可以提高流量智能化，同时必不可免的带来设备配置复杂，负载均衡压力增高以及故障排查上的复杂性等问题


负载均衡算法
静态负载均衡算法
轮询，比率，优先权

动态负载均衡算法
最少的连接数
最快响应速度

